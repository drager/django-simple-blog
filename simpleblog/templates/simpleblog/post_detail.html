{% extends 'base.html' %}

{% load i18n %}
{% load markdown_deux_tags %}

{% block content %}

	<article itemscope itemtype="http://schema.org/Article">
		<header itemprop="name">
			<a href="{{ post.get_absolute_url }}">
				<h1>{{ post.title }}</h1>
			</a>
		</header>
		
		<p class="publish-data">
			{% trans 'Posted on' %}
			<time itemprop="datePublished" datetime="{{ post.post_date|date:'Y-m-d H:i:s' }}">
				{{ post.post_date }}
			</time>
			{% trans 'by' %}
			<span itemprop="author">{{ post.posted_by }}</span>
            {% if not comments_disabled %} -
                <a itemprop="discussionUrl" href="{{ post.get_absolute_url }}#comments">
                    <span itemprop="comment">
                        {{ post.comment_count }} {% trans 'comment' %}{{ post.comment_count|pluralize }}
                    </span>
                </a>
            {% endif %}
		</p>

		<span itemprop="articleBody">
            {{ post.bodytext|markdown }}
		</span>

		<footer>
			<span class="hidden" itemprop="wordCount">{{ post.bodytext|wordcount }}</span>
		</footer>
		<hr />
	</article>

{% if not comments_disabled %}
    <a name="comments"><h2>{% trans 'Comment' %}</h2></a>
    {% if post.allow_comments %}
        {% include 'simpleblog/includes/post_form.html' %}
        <hr />
        <h2>{% trans 'Comments' %}</h2>

        {% include page_template %}

    {% else %}
        <p>{% trans 'Comments are disabled for this post.' %}</p>
    {% endif %}
{% endif %}

{% endblock %}
